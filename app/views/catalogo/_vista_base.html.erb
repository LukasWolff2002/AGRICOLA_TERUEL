<!-- app/views/shared/_vista_base.html.erb -->

<%= stylesheet_link_tag 'portada' %>
<%= stylesheet_link_tag 'product' %>
<%= stylesheet_link_tag 'informacion_nutricional' %>
<%= stylesheet_link_tag 'bandeja' %>
<%= stylesheet_link_tag 'columns' %>

<!-- PORTADA -->
<div class="portada-container">
  <% if portada_image.present? %>
    <%= image_tag portada_image, 
                  class: "portada-position", 
                  style: "position: relative; top: 0px; left: 0px; transform: translate(0%, -4%);" %>
  
  <% end %>

  <div class="image-text" id="<%= portada_id %>">
    <%= portada_text.html_safe if portada_text.present? %>
  </div>
</div>


<!-- PRODUCT -->
<div class="product-container">
  <div class="product-image">
    <%= image_tag product_image, class: "red-container" if product_image.present? %>
  </div>

  <div class="product-info">
    <!-- Título del producto -->
    <% if product_title.present? %>
      <h2><%= product_title %></h2>
    <% else %>
      <h2>Pronto actualizaremos esta sección</h2>
    <% end %>

    <!-- Descripción principal -->
    <% if product_description.present? %>
      <p><%= product_description %></p>
    <% else %>
      <p>Pronto actualizaremos esta sección</p>
    <% end %>

    <div class="product-details">
      <!-- CARACTERÍSTICAS -->
      <h3>Características</h3>
      <% if product_features.present? && product_features.any? %>
        <ul>
          <% product_features.each do |feature| %>
            <li><%= feature %></li>
          <% end %>
        </ul>
      <% else %>
        <p>Pronto actualizaremos esta sección</p>
      <% end %>

      <!-- IDEALES PARA -->
      <h3>Ideales Para</h3>
      <% if product_uses.present? && product_uses.any? %>
        <ul>
          <% product_uses.each do |use| %>
            <li><%= use %></li>
          <% end %>
        </ul>
      <% else %>
        <p>Pronto actualizaremos esta sección</p>
      <% end %>

      <!-- DISPONIBLE -->
      <h3>Disponible</h3>
      <% if product_availability.present? && product_availability.any? %>
        <ul>
          <% product_availability.each do |avail| %>
            <li><%= avail %></li>
          <% end %>
        </ul>
      <% else %>
        <p>Pronto actualizaremos esta sección</p>
      <% end %>

      <!-- FORMATOS DISPONIBLES -->
      <h3>Formatos Disponibles</h3>
      <% if product_formats.present? && product_formats.any? %>
        <ul>
          <% product_formats.each do |format| %>
            <li><%= format %></li>
          <% end %>
        </ul>
      <% else %>
        <p>Pronto actualizaremos esta sección</p>
      <% end %>

      <!-- GRADOS BRIX -->
      <h3>Grados Brix</h3>
      <% if product_brix.present? && product_brix.any? %>
        <ul>
          <% product_brix.each do |brix_value| %>
            <li><%= brix_value %></li>
          <% end %>
        </ul>
      <% else %>
        <p>Pronto actualizaremos esta sección</p>
      <% end %>
    </div>
  </div>
</div>

<!-- BANDEJA -->
<div class="bandeja">
  <%= image_tag 'us/BANDEJA_1_US.jpg', alt: 'Bandeja 1', class: "bandeja-img" %>
  <div class="content">
      <h1>Así de rico puedes cocinar con estos <br>tomates</h1>
      <p>Agrícola Teruel lleva a tu mesa lo mejor del campo con productos frescos, respetando la inocuidad y sustentabilidad de cada tomate para acompañar tu paladar y salud!</p>
      <a href="/catalogo" class="boton-bandeja">Ver Catálogo</a>
  </div>
</div>

<!-- CONTENT & NUTRICIÓN -->
<div class="content-container">
  <div class="description-container">
    <% if description_title.present? %>
      <h1><%= description_title %></h1>
    <% else %>
      <h1>Pronto actualizaremos esta sección</h1>
    <% end %>

    <% if description_paragraphs.present? && description_paragraphs.any? %>
      <% description_paragraphs.each do |paragraph| %>
        <p><%= paragraph %></p>
      <% end %>
    <% else %>
      <p>Pronto actualizaremos esta sección</p>
    <% end %>
  </div>

  <div class="nutrition-container">
    <h2>Información Nutricional</h2>

    <% if nutrition_serving_size.present? ||
          nutrition_calories.present? ||
          nutrition_proteins.present? ||
          nutrition_fats.present? ||
          nutrition_carbs.present? ||
          nutrition_sugars.present? ||
          nutrition_sodium.present? %>
      <table>
        <tr>
          <th>Tamaño de porción:</th>
          <td><%= nutrition_serving_size.presence || "Pronto..." %></td>
        </tr>
        <tr>
          <td>Energía (kcal)</td>
          <td><%= nutrition_calories.presence || "Pronto..." %></td>
        </tr>
        <tr>
          <td>Proteínas (g)</td>
          <td><%= nutrition_proteins.presence || "Pronto..." %></td>
        </tr>
        <tr>
          <td>Grasas Totales (g)</td>
          <td><%= nutrition_fats.presence || "Pronto..." %></td>
        </tr>
        <tr>
          <td>Hidratos de Carbono (g)</td>
          <td><%= nutrition_carbs.presence || "Pronto..." %></td>
        </tr>
        <tr>
          <td>Azúcares Totales (g)</td>
          <td><%= nutrition_sugars.presence || "Pronto..." %></td>
        </tr>
        <tr>
          <td>Sodio (mg)</td>
          <td><%= nutrition_sodium.presence || "Pronto..." %></td>
        </tr>
      </table>
    <% else %>
      <p>Pronto actualizaremos esta sección</p>
    <% end %>
  </div>
</div>

<!-- BOTÓN COTIZAR / MODAL -->
<div class="columnas_4_contenedor">
  <div class="column-empty" style="width: 40%;">
    <button type="button" class="button-style" data-bs-toggle="modal" data-bs-target="#talkModal" style="width: 100%; text-align: center; background-color: var(--primary-color)">
      Cotizar
    </button>

    <div class="modal fade" id="talkModal" tabindex="-1" aria-labelledby="talkModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="talkModalLabel">Añadir Nuevo Comentario</h5>
            <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <%= render 'comments/new', comment: @comment %>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
